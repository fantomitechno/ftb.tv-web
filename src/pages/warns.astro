---
import GlobalLayout from "../layouts/GlobalLayout.astro";
import PageHeader from "../components/PageHeader.astro";
import Section from "../components/Section.astro";

import { getChannel, isValidCookie } from "../utils/cookie";
import WarnList from "../components/warn/WarnList.astro";

const token = Astro.cookies.get("token")?.value ?? "";

if (!isValidCookie(token)) Astro.redirect("/");

const channelId = getChannel(token);
---

<GlobalLayout title="Administration">
  <PageHeader>Admin</PageHeader>
  <main>
    <Section title="Warning list">
      <a href="/admin">back to admin</a>
      <WarnList channelId={channelId} />
    </Section>
  </main>
</GlobalLayout>
